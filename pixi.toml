[workspace]
name = "m2t2"
version = "1.0.0"
description = "Multi-Task Masked Transformer for Object-centric Pick and Place"
channels = ["conda-forge"]
platforms = ["linux-64"]

[dependencies]
python = "3.10.*"
pip = "*"
gcc = "12.*"
gxx = "12.*"

# Python dependencies from requirements.txt
fastapi = "*"
h5py = "*"
hydra-core = "*"
matplotlib = "*"
numpy = "<2"
requests = "*"
scikit-learn = "*"
scipy = "*"
tensorboard = "*"
trimesh = "*"
uvicorn = "*"

[pypi-dependencies]
torch = "==2.5.1+cu121"
torchvision = "==0.20.1+cu121"
meshcat = "*"

[pypi-options]
extra-index-urls = ["https://download.pytorch.org/whl/cu121"]

[tasks]
# Install local packages (run after pixi install)
setup = "pip install pointnet2_ops/ --no-build-isolation && pip install -e ."

# Download model weights
download-weights = "git clone https://huggingface.co/wentao-yuan/m2t2 weights"

# Run demo (starts meshcat server and runs demo)
demo = "./m2t2_demo.sh"
